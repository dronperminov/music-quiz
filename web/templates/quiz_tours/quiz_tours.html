{% set title = "Мини-квизы | Музыкальный квиз Плюшевой наковальни" %}
{% include "components/header.html" %}
    <link rel="stylesheet" type="text/css" href="/styles/quiz_tours/quiz_tours.css?v={{version}}">
</head>
<body ondragstart="return false">
    {% include "components/menu.html" %}

    <div class="content">
        <h1>Мини-квизы</h1>

        <div id="quiz-tours">
            <div class="quiz-tours"></div>
            <div class="loader hidden"><img src="/images/loader.svg"></div>
        </div>
    </div>

    <script src="/js/utils/utils.js?v={{version}}"></script>
    <script src="/js/utils/fetch.js?v={{version}}"></script>
    <script src="/js/utils/infinite_scroll.js?v={{version}}"></script>

    <script src="/js/entities/quiz_tour.js?v={{version}}"></script>

    <script>
        let config = {
            pageSize: 10,
            url: "/quiz-tours",

            getParams: () => {
                return {}
            },

            onLoad: (response, block) => {
                for (let quizTour of response.quiz_tours) {
                    quizTour = new QuizTour(quizTour, response.statuses)
                    block.appendChild(quizTour.Build())
                }

                return response.quiz_tours.length
            }
        }

        let infiniteScroll = new InfiniteScroll("quiz-tours", config)
        infiniteScroll.LoadContent()
    </script>

    {% include "components/footer.html" %}
</body>
</html>
